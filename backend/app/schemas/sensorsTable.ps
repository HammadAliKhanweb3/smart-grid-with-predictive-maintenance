
CREATE TABLE sensor_readings (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    
    recorded_at TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP(3),
    -- (3) gives millisecond precision if your sensor provides it
    
    input_sensor VARCHAR(50) NOT NULL,
    -- e.g., 'main-unit-01', 'inverter-A' â€” make it required
    
    input_voltage DECIMAL(8,3) NOT NULL,   -- e.g., 230.125 V
    out_current1  DECIMAL(8,3) NOT NULL,   -- e.g., 12.450 A
    out_voltage1  DECIMAL(8,3) NOT NULL,   -- e.g., 48.120 V
    out_current2  DECIMAL(8,3) NOT NULL,
    out_voltage2  DECIMAL(8,3) NOT NULL,
    out_current3  DECIMAL(8,3) NOT NULL,
    out_voltage3  DECIMAL(8,3) NOT NULL,

    -- Indexes for fast queries
    INDEX idx_recorded_at (recorded_at DESC),
    INDEX idx_sensor_time (input_sensor, recorded_at DESC)
) ENGINE=InnoDB ROW_FORMAT=COMPRESSED;